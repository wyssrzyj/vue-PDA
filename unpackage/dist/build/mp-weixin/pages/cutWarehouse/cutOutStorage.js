(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/cutWarehouse/cutOutStorage"],{"06e5":function(e,o,t){"use strict";var r=t("08da"),a=t.n(r);a.a},"08da":function(e,o,t){},"35ce":function(e,o,t){"use strict";t.r(o);var r=t("ae7e"),a=t.n(r);for(var n in r)"default"!==n&&function(e){t.d(o,e,(function(){return r[e]}))}(n);o["default"]=a.a},"8a07":function(e,o,t){"use strict";(function(e){t("1848");r(t("dc04"));var o=r(t("ae3f"));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(o.default)}).call(this,t("97ff")["createPage"])},ae3f:function(e,o,t){"use strict";t.r(o);var r=t("dccb"),a=t("35ce");for(var n in a)"default"!==n&&function(e){t.d(o,e,(function(){return a[e]}))}(n);t("06e5");var c,u=t("f0c5"),s=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,"8b6d0d7c",null,!1,r["a"],c);o["default"]=s.exports},ae7e:function(e,o,t){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var r=t("dc04"),a=t("d583"),n=c(t("8f88"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?u(Object(t),!0).forEach((function(o){i(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}function i(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}var d=function(){t.e("components/scan/scan").then(function(){return resolve(t("b2dc"))}.bind(null,t)).catch(t.oe)},l=(0,r.defineComponent)({name:"cutOutStorage",onLoad:function(){},onShow:function(){var o=this;e.$off("scancodedate"),e.$on("scancodedate",(function(e){console.log(e),o.sewingTaskRecord?(console.log("扫描PCS码"),o.handleScanPCS(e.code)):(console.log("扫描缝制任务单号"),o.handleScanTask(e.code))}))},setup:function(){var o=(0,r.reactive)({isSelectCheckbox:!0,showModal:!1,showSuccessPop:!1,showErrorPop:!1,showSuccessMessage:"",showErrorMessage:"",sewingTaskRecord:"",outStorageArr:[],alreadyOutStorageArr:[],startX:""}),t=function(){e.scanCode({onlyFromCamera:!0,success:function(e){console.log(e.result),o.sewingTaskRecord?(console.log("扫描扫描PCS码"),u(e.result)):(console.log("扫描扫描缝制任务单号"),c(e.result))},fail:function(e){}})},c=function(t){n.default.getSewingExecution({sewingExecutionNum:t}).then((function(t){if(0===t.code)e.showToast({title:"扫描缝制任务单号成功！",icon:"none",duration:3e3}),o.sewingTaskRecord=t.data.sewingExecutionNum,o.outStorageArr=t.data.list.map((function(e,o){return{id:e.id||"",productId:e.productId||"",produceId:e.produceId||"",subpackageId:e.subpackageId||"",proNum:e.proNum||"",colorCode:e.colorCode||"",colorName:e.colorName||"",sizeCode:e.sizeCode||"",sizeName:e.sizeName||"",packageNum:e.packageNum||"",inputNumber:e.inputNumber||"",outputNumber:0,storageStatus:0,isShowScan:!0,isSelectScan:!1}}));else{o.showErrorMessage=t.msg,o.showErrorPop=!0;var r=setTimeout((function(){clearTimeout(r),o.showErrorPop=!1}),2e3)}}))},u=function(t){n.default.getPiecesByPCSNum({pcsNum:t,sewingExecutionNum:o.sewingTaskRecord}).then((function(t){if(0===t.code)e.showToast({title:"扫描PCS码成功！",icon:"none",duration:3e3}),o.alreadyOutStorageArr.push({id:t.data.id||"",productId:t.data.productId||"",produceId:t.data.produceId||"",subpackageId:t.data.subpackageId||"",proNum:t.data.proNum||"",colorCode:t.data.colorCode||"",colorName:t.data.colorName||"",sizeCode:t.data.sizeCode||"",sizeName:t.data.sizeName||"",packageNum:t.data.packageNum||"",inputNumber:t.data.inputNumber||"",arrowFlag:!0}),o.alreadyOutStorageArr=(0,a.arrayToHeavy)(o.alreadyOutStorageArr),o.isSelectCheckbox?g(!1):g(!0);else{o.showErrorMessage=t.msg,o.showErrorPop=!0;var r=setTimeout((function(){clearTimeout(r),o.showErrorPop=!1}),2e3)}}))},i=function(e){o.isSelectCheckbox?(o.isSelectCheckbox=!1,g(!0)):(o.isSelectCheckbox=!0,g(!1))},d=function(){o.showModal=!0},l=function(){n.default.outOfStock({list:o.outStorageArr}).then((function(e){if(0===e.code){o.outStorageArr=[],o.showSuccessMessage="出库成功！",o.showSuccessPop=!0;var t=setTimeout((function(){clearTimeout(t),o.showSuccessPop=!1}),2e3)}}))},f=function(){o.outStorageArr=[],o.showModal=!1,o.sewingTaskRecord=""},g=function(e){for(var t=0;t<o.outStorageArr.length;t++)for(var r=0;r<o.alreadyOutStorageArr.length;r++)o.outStorageArr[t].id==o.alreadyOutStorageArr[r].id&&(o.outStorageArr[t].isShowScan=e,o.outStorageArr[t].isSelectScan=e)};return s(s({},(0,r.toRefs)(o)),{},{handleScanCodeBox:t,handleScanTask:c,handleScanPCS:u,checkboxChange:i,handleMore:d,handleOutStorage:l,handleEmpty:f,outStorageMethods:g})},components:{scanCode:d}});o.default=l}).call(this,t("d5d0")["default"])},dccb:function(e,o,t){"use strict";var r;t.d(o,"b",(function(){return a})),t.d(o,"c",(function(){return n})),t.d(o,"a",(function(){return r}));var a=function(){var e=this,o=e.$createElement;e._self._c},n=[]}},[["8a07","common/runtime","common/vendor"]]]);