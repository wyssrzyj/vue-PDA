var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,o)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,__spreadValues=(e,t)=>{for(var o in t||(t={}))__hasOwnProp.call(t,o)&&__defNormalProp(e,o,t[o]);if(__getOwnPropSymbols)for(var o of __getOwnPropSymbols(t))__propIsEnum.call(t,o)&&__defNormalProp(e,o,t[o]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t));!function(e){"use strict";function t(e){if(e&&e.__esModule)return e;var t={__proto__:null,[Symbol.toStringTag]:"Module"};return e&&Object.keys(e).forEach((function(o){if("default"!==o){var a=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,a.get?a:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var o=t(e);const a=Object.prototype.toString,r=e=>a.call(e),n=e=>r(e).slice(8,-1);function s(e,t){return"Function"===n(t)?"function() { [native code] }":t}function c(e,t,o){if("string"==typeof __channelId__&&__channelId__)return o.push(t.replace("at ","uni-app:///")),console[e].apply(console,o);return o.map((function(e){const t=r(e).toLowerCase();if("[object object]"===t||"[object array]"===t)try{e="---BEGIN:JSON---"+JSON.stringify(e,s)+"---END:JSON---"}catch(o){e=t}else if(null===e)e="---NULL---";else if(void 0===e)e="---UNDEFINED---";else{const t=n(e).toUpperCase();e="NUMBER"===t||"BOOLEAN"===t?"---BEGIN:"+t+"---"+e+"---END:"+t+"---":String(e)}return e})).join("---COMMA---")+" "+t}function l(e,t,...o){const a=c(e,t,o);a&&console[e](a)}const i=e=>{let t={};return e=e.reduce((function(e,o){return!t[o.id]&&(t[o.id]=e.push(o)),e}),[])},d=e=>{if(1==e.touches.length)return e.touches[0].clientX},u=(e,t,o)=>{if(1==e.touches.length){let a=e.currentTarget.dataset.index,r=t-e.touches[0].clientX,n=60,s="",c=o;return 0==r||r<0?(s="left:0px",c[a].arrowFlag=!0):r>0&&(c[a].arrowFlag=!1,s="left:-"+r+"px",r>=n&&(s="left:-"+n+"px")),c[a].txtStyle=s,c}},m=(e,t,o)=>{if(1==e.changedTouches.length){let a=60,r=t-e.changedTouches[0].clientX>a/2?"left:-"+a+"px":"left:0px",n=o;return n[e.currentTarget.dataset.index].txtStyle=r,n}},p=(e,t=(()=>{}),o=1e3)=>{uni.showToast({title:e,icon:"none",duration:o,success:function(){let e=setTimeout((async()=>{clearTimeout(e),uni.hideToast(),t?await t():l("log","at utils/index.js:91","toasting no func")}),o)}})},g=async(e,t,o={})=>new Promise(((a,r)=>{uni.showLoading({title:"加载中..."}),uni.request({method:t||"GET",header:{"Content-Type":"application/json","X-AjaxPro-Method":"ShowList","Access-Control-Allow-Origin":"*","Origin-Terminal":"PDA",token:uni.getStorageSync("token")},url:e,data:o,async success(e){200==e.statusCode?401==e.data.code?(p(e.data.msg),uni.getStorageSync("token")||uni.navigateTo({url:"/pages/login/login"})):(await a(e.data),uni.hideLoading()):500==e.statusCode?(p("服务器错误"),uni.hideLoading()):uni.hideLoading()},async fail(e){await r(e),uni.hideLoading()}})})),h="http://192.168.99.140/proxyApi",S={login:e=>g(`${h}/login`,"POST",e),getLocation:e=>g(`${h}/MesLocationManagement/meslocationmanagement/getLocation`,"GET",e),getInfoBySearch:e=>g(`${h}/mes/mespiecesmarket/getInfoBySearch`,"GET",e),addPiecesMarket:e=>g(`${h}/mes/mespiecesmarket/addPiecesMarket`,"POST",e),getReason:e=>g(`${h}/mes/mespiecesmarket/getReason`,"GET",e),getSewingExecution:e=>g(`${h}/mes/mespiecesmarket/getSewingExecution`,"GET",e),getPiecesByPCSNum:e=>g(`${h}/mes/mespiecesmarket/getPiecesByPCSNum`,"GET",e),outOfStock:e=>g(`${h}/mes/mespiecesmarket/outOfStock`,"POST",e)};var w=(e,t)=>{for(const[o,a]of t)e[o]=a;return e};var N=w(e.defineComponent({name:"login",onLoad(){},onShow(){uni.removeStorageSync("token")},setup:()=>({formSubmit:e=>{try{const{username:t,password:o}=e.detail.value;if(!t)return void p("请输入用户名");if(!o)return void p("请输入密码");S.login({username:t,password:o}).then((e=>{0===e.code&&(p("登录成功"),uni.removeStorageSync("token"),uni.setStorageSync("token",e.data.token),uni.navigateTo({url:"/pages/cutWarehouse/cutWarehouse"}))}))}catch(t){l("log","at pages/login/login.vue:70",t)}}})}),[["render",function(t,o,a,r,n,s){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"logoBox"},[e.createElementVNode("image",{src:"/static/login/logo.png",mode:"widthFix",class:"logo"})]),e.createElementVNode("form",{onSubmit:o[0]||(o[0]=(...e)=>t.formSubmit&&t.formSubmit(...e)),class:"form-box"},[e.createElementVNode("view",{class:"cu-form-group input-ba"},[e.createElementVNode("image",{src:"/static/login/username@3x.png",class:"icon-login"}),e.createElementVNode("input",{class:"input-box",placeholder:"请输入账号",name:"username",value:""})]),e.createElementVNode("view",{class:"cu-form-group margin-lr-xl input-ba"},[e.createElementVNode("image",{src:"/static/login/password.png",class:"icon-login"}),e.createElementVNode("input",{class:"input-box",type:"password",placeholder:"请输入密码",name:"password",value:""})]),e.createElementVNode("view",{class:"padding flex flex-direction margin-top-xl"},[e.createElementVNode("button",{class:"cu-btn bg-blue lg btn-login","form-type":"submit"},"登录")])],32)])}],["__scopeId","data-v-2987ab02"]]);const E=[{title:"裁片入库",src:"../../static/cutWarehouse/ruku.png",color:"linear-gradient(180deg, #08B0D0 0%, #06B8D7 100%)",link:"/pages/cutWarehouse/cutInStorage"},{title:"裁片出库",src:"../../static/cutWarehouse/chuku.png",color:"linear-gradient(180deg, #4F94EF 0%, #438CF0 100%)",link:"/pages/cutWarehouse/cutOutStorage"},{title:"撤销裁片入库",src:"../../static/cutWarehouse/chexiaoruku.png",color:" linear-gradient(0deg, #F0AA38 0%, #F48D34 100%)",link:"/pages/cutWarehouse/repealCutInStorage"}];var v,k,y,C=w(e.defineComponent({name:"cutWarehouse",setup(){const t=e.reactive({list:E});return __spreadProps(__spreadValues({},e.toRefs(t)),{toList:e=>{uni.navigateTo({url:e.link})}})}}),[["render",function(t,o,a,r,n,s){return e.openBlock(),e.createElementBlock("view",{class:"tabBox"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.list,((o,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:e.normalizeClass([a%2?"":"addRightMargin","boxItem"]),onClick:e=>t.toList(o),style:e.normalizeStyle({background:o.color})},[e.createElementVNode("image",{src:o.src,class:"image"},null,8,["src"]),e.createElementVNode("text",{class:"boxItemTitle"},e.toDisplayString(o.title),1)],14,["onClick"])))),128))])}],["__scopeId","data-v-37f0527c"]]),V=!1;var f=w({data:()=>({scanCode:""}),created:function(e){this.initScan(),this.startScan()},onHide:function(){this.stopScan()},destroyed:function(){this.stopScan()},methods:{initScan(){let e=this;v=plus.android.runtimeMainActivity();var t=plus.android.importClass("android.content.IntentFilter");(y=new t).addAction("com.scanner.broadcast"),k=plus.android.implements("io.dcloud.feature.internal.reflect.BroadcastReceiver",{onReceive:function(t,o){plus.android.importClass(o);let a=o.getStringExtra("data");e.queryCode(a)}})},startScan(){v.registerReceiver(k,y)},stopScan(){v.unregisterReceiver(k)},queryCode(e){if(V)return!1;V=!0,setTimeout((function(){V=!1}),150),uni.$emit("scancodedate",{code:e})}}},[["render",function(t,o,a,r,n,s){return e.openBlock(),e.createElementBlock("view",{class:"content"})}],["__scopeId","data-v-ac99d1ba"]]);var I=w(e.defineComponent({name:"cutInStorage",onLoad(){},onShow(){uni.$off("scancodedate"),uni.$on("scancodedate",(e=>{l("log","at pages/cutWarehouse/cutInStorage.vue:92",e),this.storageValue?(l("log","at pages/cutWarehouse/cutInStorage.vue:94","扫描PCS码"),this.handleScanPCS(e.code)):(l("log","at pages/cutWarehouse/cutInStorage.vue:98","扫描库位"),this.handleScanStorage(e.code))}))},setup(){const t=e.reactive({showModal:!1,showSuccessPop:!1,showErrorPop:!1,showSuccessMessage:"",showErrorMessage:"",storageValue:"",wareHouseLocation:"",typeMode:"1",inStorageArr:[],startX:""}),o=e=>{S.getLocation({locationCode:e}).then((e=>{if(0===e.code)uni.showToast({title:"扫描库位成功！",icon:"none",duration:3e3}),l("log","at pages/cutWarehouse/cutInStorage.vue:150",e.data),t.wareHouseLocation=e.data.id,t.storageValue=e.data.locationCode;else{t.showErrorMessage=e.msg,t.showErrorPop=!0;let o=setTimeout((()=>{clearTimeout(o),t.showErrorPop=!1}),2e3)}}))},a=e=>{t.inStorageArr=t.inStorageArr.reverse(),S.getInfoBySearch({pcsNum:e,type:t.typeMode,wareHouseLocation:t.wareHouseLocation}).then((e=>{if(0===e.code)l("log","at pages/cutWarehouse/cutInStorage.vue:173",e.data),uni.showToast({title:"扫描PCS码成功！",icon:"none",duration:3e3}),t.inStorageArr.push({id:e.data.subpackageId||"",productId:e.data.productId||"",produceId:e.data.produceId||"",subpackageId:e.data.subpackageId||"",proNum:e.data.proNum||"",colorCode:e.data.colorCode||"",colorName:e.data.colorName||"",sizeCode:e.data.sizeCode||"",sizeName:e.data.sizeName||"",packageNum:e.data.packageNum||"",inputNumber:e.data.inputNumber||"",arrowFlag:!0}),t.inStorageArr=i(t.inStorageArr),t.inStorageArr=t.inStorageArr.reverse();else{t.showErrorMessage=e.msg,t.showErrorPop=!0;let o=setTimeout((()=>{clearTimeout(o),t.showErrorPop=!1}),2e3)}}))};return __spreadProps(__spreadValues({},e.toRefs(t)),{handleScanCodeBox:()=>{uni.scanCode({onlyFromCamera:!0,success:e=>{l("log","at pages/cutWarehouse/cutInStorage.vue:122",e.result),t.storageValue?(l("log","at pages/cutWarehouse/cutInStorage.vue:125","扫描扫描PCS码"),a(e.result)):(l("log","at pages/cutWarehouse/cutInStorage.vue:129","扫描扫描库位"),o(e.result))},fail:e=>{}})},handleScanStorage:o,handleScanPCS:a,handleTouchStart:e=>{t.startX=d(e)},handleTouchMove:e=>{t.inStorageArr=u(e,t.startX,t.inStorageArr)},handleTouchEnd:e=>{t.inStorageArr=m(e,t.startX,t.inStorageArr)},deleteMember:e=>{t.inStorageArr.splice(e,1)},handleMore:()=>{t.showModal=!0},handleInStorage:()=>{let e=t.inStorageArr.map(((e,o)=>({index:t.inStorageArr.length-o,productId:e.productId||"",produceId:e.produceId||"",subpackageId:e.subpackageId||"",proNum:e.proNum||"",colorCode:e.colorCode||"",colorName:e.colorName||"",sizeCode:e.sizeCode||"",sizeName:e.sizeName||"",packageNum:e.packageNum||"",inputNumber:e.inputNumber||"",outputNumber:0,storageStatus:0,warehouseLocationId:t.wareHouseLocation})));S.addPiecesMarket({list:e}).then((e=>{if(0===e.code){t.inStorageArr=[],t.showSuccessMessage="入库成功！",t.showSuccessPop=!0;let e=setTimeout((()=>{clearTimeout(e),t.showSuccessPop=!1}),2e3)}}))},handleEmpty:()=>{t.inStorageArr=[],t.showModal=!1,t.storageValue=""}})},components:{scanCode:f}}),[["render",function(t,o,a,r,n,s){const c=e.resolveComponent("scanCode");return e.openBlock(),e.createElementBlock("view",{class:"mainContent"},[e.createElementVNode("view",{class:"location"},[e.createElementVNode("image",{class:"scanCodeBox",src:"/static/cutWarehouse/scanCodeBox.png",mode:"aspectFit",onClick:o[0]||(o[0]=(...e)=>t.handleScanCodeBox&&t.handleScanCodeBox(...e))}),e.createElementVNode("input",{class:"uni-input scanInput","placeholder-style":"font-size: 34rpx","confirm-type":"search",placeholder:t.storageValue?"请扫描PCS码":"请扫描库位码"},null,8,["placeholder"])]),e.createElementVNode("view",{class:"storageLocation"},[e.createElementVNode("text",{class:"storageTitle"},"当前库位："),e.withDirectives(e.createElementVNode("input",{class:"uni-input storageInput","placeholder-style":"font-size: 34rpx","onUpdate:modelValue":o[1]||(o[1]=e=>t.storageValue=e),"confirm-type":"search",placeholder:"请输入当前库位",disabled:""},null,512),[[e.vModelText,t.storageValue]])]),e.createElementVNode("view",{class:"pannelContent"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.inStorageArr,((a,r)=>(e.openBlock(),e.createElementBlock("view",{class:"storageItem",key:r},[e.createElementVNode("view",{class:e.normalizeClass([0==r?"selectLine":"","touch-list","list-touch"]),onTouchstart:o[2]||(o[2]=(...e)=>t.handleTouchStart&&t.handleTouchStart(...e)),onTouchmove:o[3]||(o[3]=(...e)=>t.handleTouchMove&&t.handleTouchMove(...e)),onTouchend:o[4]||(o[4]=(...e)=>t.handleTouchEnd&&t.handleTouchEnd(...e)),"data-index":r,style:e.normalizeStyle(a.txtStyle)},[e.createElementVNode("text",{class:"serialNumber"},e.toDisplayString(t.inStorageArr.length-r)+".",1),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"storageCode"},e.toDisplayString(a.proNum),1),e.createElementVNode("view",null,[e.createElementVNode("text",null,"颜色尺码："),e.createElementVNode("text",{decode:"true",space:"true"},e.toDisplayString(a.colorCode)+" "+e.toDisplayString(a.colorName)+" "+e.toDisplayString(a.sizeName),1)]),e.createElementVNode("view",{class:"storageContent"},[e.createElementVNode("view",null,[e.createElementVNode("text",null,"扎号："),e.createElementVNode("text",null,e.toDisplayString(a.packageNum),1)]),e.createElementVNode("view",{class:"storageNum"},[e.createElementVNode("text",null,"数量："),e.createElementVNode("text",null,e.toDisplayString(a.inputNumber),1)])])]),a.arrowFlag?(e.openBlock(),e.createElementBlock("image",{key:0,class:"arrowImage",src:"/static/cutWarehouse/leftArrow.png",mode:"aspectFit"})):(e.openBlock(),e.createElementBlock("image",{key:1,class:"arrowImage",src:"/static/cutWarehouse/rightArrow.png",mode:"aspectFit"}))],46,["data-index"]),e.createElementVNode("view",{class:"touch-list list-delete",onClick:e=>t.deleteMember(r)}," 删除 ",8,["onClick"])])))),128))]),e.createElementVNode("view",{class:"bottomLocation"},[e.createElementVNode("view",{class:"scanNum"},"已扫描行数："+e.toDisplayString(t.inStorageArr.length),1),e.createElementVNode("view",{class:"btnLocation"},[e.createElementVNode("view",{class:"commonBtn moreBtn",onClick:o[5]||(o[5]=(...e)=>t.handleMore&&t.handleMore(...e))},"更多"),t.inStorageArr.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"commonBtn inStorageBtn",onClick:o[6]||(o[6]=(...e)=>t.handleInStorage&&t.handleInStorage(...e))},"入库")):(e.openBlock(),e.createElementBlock("view",{key:1,class:"commonBtn noInStorageBtn"},"入库"))])]),e.withDirectives(e.createElementVNode("view",{class:"btnModal"},[e.createElementVNode("image",{class:"modalImage",src:"/static/cutWarehouse/modalImage.png",mode:"aspectFit"}),e.createElementVNode("view",{class:"commonBtn emptyBtn",onClick:o[7]||(o[7]=(...e)=>t.handleEmpty&&t.handleEmpty(...e))},"清空")],512),[[e.vShow,t.showModal]]),t.showSuccessPop?(e.openBlock(),e.createElementBlock("view",{key:0,class:"successPopup remindPopup"},[e.createElementVNode("view",{class:"successImage"}),e.createElementVNode("view",{style:{"margin-left":"20rpx"}},e.toDisplayString(t.showSuccessMessage),1)])):e.createCommentVNode("",!0),t.showErrorPop?(e.openBlock(),e.createElementBlock("view",{key:1,class:"errorPopup remindPopup"},[e.createElementVNode("view",{class:"errorImage"}),e.createElementVNode("view",{style:{"margin-left":"20rpx"}},e.toDisplayString(t.showErrorMessage),1)])):e.createCommentVNode("",!0),e.createVNode(c)])}],["__scopeId","data-v-47a0209d"]]);var x=w(e.defineComponent({name:"repealCutInStorage",onLoad(){},onShow(){uni.$off("scancodedate"),uni.$on("scancodedate",(e=>{l("log","at pages/cutWarehouse/repealCutInStorage.vue:118",e),this.storageValue?(l("log","at pages/cutWarehouse/repealCutInStorage.vue:120","扫描PCS码"),this.handleScanPCS(e.code)):(l("log","at pages/cutWarehouse/repealCutInStorage.vue:124","扫描库位"),this.handleScanStorage(e.code))}))},setup(){const t=e.reactive({showModal:!1,showSuccessPop:!1,showErrorPop:!1,showReasonMask:!1,showSuccessMessage:"",showErrorMessage:"",storageValue:"",wareHouseLocation:"",typeMode:"2",inStorageArr:[],startX:"",selectIndex:0,selectArr:[],username:"",date:""});e.onMounted((()=>{S.getReason({}).then((e=>{0===e.code&&(t.selectArr=e.data.dictList.map((e=>e.dictLabel)),t.username=e.data.username,t.date=e.data.date)}))}));const o=e=>{S.getLocation({locationCode:e}).then((e=>{if(0===e.code)uni.showToast({title:"扫描库位成功！",icon:"none",duration:3e3}),t.wareHouseLocation=e.data.id,t.storageValue=e.data.locationCode;else{t.showErrorMessage=e.msg,t.showErrorPop=!0;let o=setTimeout((()=>{clearTimeout(o),t.showErrorPop=!1}),2e3)}}))},a=e=>{t.inStorageArr=t.inStorageArr.reverse(),S.getInfoBySearch({pcsNum:e,type:t.typeMode,wareHouseLocation:t.wareHouseLocation}).then((e=>{if(0===e.code)uni.showToast({title:"扫描PCS码成功！",icon:"none",duration:3e3}),t.inStorageArr.push({id:e.data.subpackageId||"",productId:e.data.productId||"",produceId:e.data.produceId||"",subpackageId:e.data.subpackageId||"",proNum:e.data.proNum||"",colorCode:e.data.colorCode||"",colorName:e.data.colorName||"",sizeCode:e.data.sizeCode||"",sizeName:e.data.sizeName||"",packageNum:e.data.packageNum||"",inputNumber:e.data.inputNumber||"",arrowFlag:!0}),t.inStorageArr=i(t.inStorageArr),t.inStorageArr=t.inStorageArr.reverse();else{t.showErrorMessage=e.msg,t.showErrorPop=!0;let o=setTimeout((()=>{clearTimeout(o),t.showErrorPop=!1}),2e3)}}))};return __spreadProps(__spreadValues({},e.toRefs(t)),{handleScanCodeBox:()=>{uni.scanCode({onlyFromCamera:!0,success:e=>{l("log","at pages/cutWarehouse/repealCutInStorage.vue:170",e.result),t.storageValue?(l("log","at pages/cutWarehouse/repealCutInStorage.vue:173","扫描扫描PCS码"),a(e.result)):(l("log","at pages/cutWarehouse/repealCutInStorage.vue:177","扫描扫描库位"),o(e.result))},fail:e=>{}})},handleScanStorage:o,handleScanPCS:a,handleTouchStart:e=>{t.startX=d(e)},handleTouchMove:e=>{t.inStorageArr=u(e,t.startX,t.inStorageArr)},handleTouchEnd:e=>{t.inStorageArr=m(e,t.startX,t.inStorageArr)},deleteMember:e=>{t.inStorageArr.splice(e,1)},handleMore:()=>{t.showModal=!0},handleRepealInStorage:()=>{t.showReasonMask=!0},handleEmpty:()=>{t.inStorageArr=[],t.showModal=!1,t.storageValue=""},bindPickerChange:e=>{t.selectIndex=e.detail.value},handleCancel:()=>{t.showReasonMask=!1},handleConfirm:()=>{let e=t.inStorageArr.map(((e,o)=>({index:t.inStorageArr.length-o,productId:e.productId||"",produceId:e.produceId||"",subpackageId:e.subpackageId||"",proNum:e.proNum||"",colorCode:e.colorCode||"",colorName:e.colorName||"",sizeCode:e.sizeCode||"",sizeName:e.sizeName||"",packageNum:e.packageNum||"",inputNumber:e.inputNumber||"",outputNumber:0,storageStatus:2,warehouseLocationId:t.wareHouseLocation})));S.addPiecesMarket({rollReason:String(t.selectIndex+1),list:e}).then((e=>{if(0===e.code){t.inStorageArr=[],t.showReasonMask=!1,t.showSuccessMessage="撤销入库成功！",t.showSuccessPop=!0;let e=setTimeout((()=>{clearTimeout(e),t.showSuccessPop=!1}),2e3)}}))}})},components:{scanCode:f}}),[["render",function(t,o,a,r,n,s){const c=e.resolveComponent("scanCode");return e.openBlock(),e.createElementBlock("view",{class:"mainContent"},[e.createElementVNode("view",{class:"location"},[e.createElementVNode("image",{class:"scanCodeBox",src:"/static/cutWarehouse/scanCodeBox.png",mode:"aspectFit",onClick:o[0]||(o[0]=(...e)=>t.handleScanCodeBox&&t.handleScanCodeBox(...e))}),e.createElementVNode("input",{class:"uni-input scanInput","placeholder-style":"font-size: 34rpx","confirm-type":"search",placeholder:t.storageValue?"请扫描PCS码":"请扫描库位码"},null,8,["placeholder"])]),e.createElementVNode("view",{class:"storageLocation"},[e.createElementVNode("text",{class:"storageTitle"},"当前库位："),e.withDirectives(e.createElementVNode("input",{class:"uni-input storageInput","placeholder-style":"font-size: 34rpx","onUpdate:modelValue":o[1]||(o[1]=e=>t.storageValue=e),"confirm-type":"search",placeholder:"请输入当前库位",disabled:""},null,512),[[e.vModelText,t.storageValue]])]),e.createElementVNode("view",{class:"pannelContent"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.inStorageArr,((a,r)=>(e.openBlock(),e.createElementBlock("view",{class:"storageItem",key:r},[e.createElementVNode("view",{class:e.normalizeClass([0==r?"selectLine":"","touch-list","list-touch"]),onTouchstart:o[2]||(o[2]=(...e)=>t.handleTouchStart&&t.handleTouchStart(...e)),onTouchmove:o[3]||(o[3]=(...e)=>t.handleTouchMove&&t.handleTouchMove(...e)),onTouchend:o[4]||(o[4]=(...e)=>t.handleTouchEnd&&t.handleTouchEnd(...e)),"data-index":r,style:e.normalizeStyle(a.txtStyle)},[e.createElementVNode("text",{class:"serialNumber"},e.toDisplayString(t.inStorageArr.length-r)+".",1),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"storageCode"},e.toDisplayString(a.proNum),1),e.createElementVNode("view",null,[e.createElementVNode("text",null,"颜色尺码："),e.createElementVNode("text",{decode:"true",space:"true"},e.toDisplayString(a.colorCode)+" "+e.toDisplayString(a.colorName)+" "+e.toDisplayString(a.sizeName),1)]),e.createElementVNode("view",{class:"storageContent"},[e.createElementVNode("view",null,[e.createElementVNode("text",null,"扎号："),e.createElementVNode("text",null,e.toDisplayString(a.packageNum),1)]),e.createElementVNode("view",{class:"storageNum"},[e.createElementVNode("text",null,"数量："),e.createElementVNode("text",null,e.toDisplayString(a.inputNumber),1)])])]),a.arrowFlag?(e.openBlock(),e.createElementBlock("image",{key:0,class:"arrowImage",src:"/static/cutWarehouse/leftArrow.png",mode:"aspectFit"})):(e.openBlock(),e.createElementBlock("image",{key:1,class:"arrowImage",src:"/static/cutWarehouse/rightArrow.png",mode:"aspectFit"}))],46,["data-index"]),e.createElementVNode("view",{class:"touch-list list-delete",onClick:e=>t.deleteMember(r)}," 删除 ",8,["onClick"])])))),128))]),e.createElementVNode("view",{class:"bottomLocation"},[e.createElementVNode("view",{class:"scanNum"},"已扫描行数："+e.toDisplayString(t.inStorageArr.length),1),e.createElementVNode("view",{class:"btnLocation"},[e.createElementVNode("view",{class:"commonBtn moreBtn",onClick:o[5]||(o[5]=(...e)=>t.handleMore&&t.handleMore(...e))},"更多"),t.inStorageArr.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"commonBtn inStorageBtn",onClick:o[6]||(o[6]=(...e)=>t.handleRepealInStorage&&t.handleRepealInStorage(...e))},"撤销入库")):(e.openBlock(),e.createElementBlock("view",{key:1,class:"commonBtn noInStorageBtn"},"撤销入库"))])]),e.withDirectives(e.createElementVNode("view",{class:"btnModal"},[e.createElementVNode("image",{class:"modalImage",src:"/static/cutWarehouse/modalImage.png",mode:"aspectFit"}),e.createElementVNode("view",{class:"commonBtn emptyBtn",onClick:o[7]||(o[7]=(...e)=>t.handleEmpty&&t.handleEmpty(...e))},"清空")],512),[[e.vShow,t.showModal]]),t.showSuccessPop?(e.openBlock(),e.createElementBlock("view",{key:0,class:"successPopup remindPopup"},[e.createElementVNode("view",{class:"successImage"}),e.createElementVNode("view",{style:{"margin-left":"20rpx"}},e.toDisplayString(t.showSuccessMessage),1)])):e.createCommentVNode("",!0),t.showErrorPop?(e.openBlock(),e.createElementBlock("view",{key:1,class:"errorPopup remindPopup"},[e.createElementVNode("view",{class:"errorImage"}),e.createElementVNode("view",{style:{"margin-left":"20rpx"}},e.toDisplayString(t.showErrorMessage),1)])):e.createCommentVNode("",!0),t.showReasonMask?(e.openBlock(),e.createElementBlock("view",{key:2,class:"reasonMask"},[e.createElementVNode("view",{class:"reasonDialog"},[e.createElementVNode("view",{class:"reasonContent"},[e.createElementVNode("view",{class:"reasonTitle"},"原因记录"),e.createElementVNode("view",{class:"reasonInside"},[e.createElementVNode("view",{class:"reasonText"},[e.createElementVNode("text",{style:{color:"red"}},"*"),e.createTextVNode("撤销入库原因： ")]),e.createElementVNode("view",{class:"reasonSelect"},[e.createElementVNode("picker",{onChange:o[8]||(o[8]=(...e)=>t.bindPickerChange&&t.bindPickerChange(...e)),value:t.selectIndex,range:t.selectArr,"range-key":"selectIndex"},[e.createElementVNode("view",{class:"uni-input"},[e.createElementVNode("text",null,e.toDisplayString(t.selectArr[t.selectIndex]),1)])],40,["value","range"]),e.createElementVNode("image",{src:"/static/cutWarehouse/selectDownArrow@2x.png",mode:"aspectFit",class:"selectDownArrow"})])]),e.createElementVNode("view",null,"操作人："+e.toDisplayString(t.username),1),e.createElementVNode("view",null,"操作时间："+e.toDisplayString(t.date),1)]),e.createElementVNode("view",{class:"btnLocation",style:{"margin-left":"40rpx"}},[e.createElementVNode("view",{class:"cancelBtn",onClick:o[9]||(o[9]=(...e)=>t.handleCancel&&t.handleCancel(...e))},"取消"),e.createElementVNode("view",{class:"confirmBtn",onClick:o[10]||(o[10]=(...e)=>t.handleConfirm&&t.handleConfirm(...e))},"确定")])])])):e.createCommentVNode("",!0),e.createVNode(c)])}],["__scopeId","data-v-47063188"]]);var B=w(e.defineComponent({name:"cutOutStorage",onLoad(){},onShow(){uni.$off("scancodedate"),uni.$on("scancodedate",(e=>{l("log","at pages/cutWarehouse/cutOutStorage.vue:92",e),this.sewingTaskRecord?(l("log","at pages/cutWarehouse/cutOutStorage.vue:94","扫描PCS码"),this.handleScanPCS(e.code)):(l("log","at pages/cutWarehouse/cutOutStorage.vue:98","扫描缝制任务单号"),this.handleScanTask(e.code))}))},setup(){const t=e.reactive({isSelectCheckbox:!0,showModal:!1,showSuccessPop:!1,showErrorPop:!1,showSuccessMessage:"",showErrorMessage:"",sewingTaskRecord:"",outStorageArr:[],alreadyOutStorageArr:[],startX:""}),o=e=>{S.getSewingExecution({sewingExecutionNum:e}).then((e=>{if(0===e.code)uni.showToast({title:"扫描缝制任务单号成功！",icon:"none",duration:3e3}),t.sewingTaskRecord=e.data.sewingExecutionNum,t.outStorageArr=e.data.list.map(((e,t)=>({id:e.id||"",productId:e.productId||"",produceId:e.produceId||"",subpackageId:e.subpackageId||"",proNum:e.proNum||"",colorCode:e.colorCode||"",colorName:e.colorName||"",sizeCode:e.sizeCode||"",sizeName:e.sizeName||"",packageNum:e.packageNum||"",inputNumber:e.inputNumber||"",outputNumber:0,storageStatus:0,isShowScan:!0,isSelectScan:!1})));else{t.showErrorMessage=e.msg,t.showErrorPop=!0;let o=setTimeout((()=>{clearTimeout(o),t.showErrorPop=!1}),2e3)}}))},a=e=>{S.getPiecesByPCSNum({pcsNum:e,sewingExecutionNum:t.sewingTaskRecord}).then((e=>{if(0===e.code)uni.showToast({title:"扫描PCS码成功！",icon:"none",duration:3e3}),t.alreadyOutStorageArr.push({id:e.data.id||"",productId:e.data.productId||"",produceId:e.data.produceId||"",subpackageId:e.data.subpackageId||"",proNum:e.data.proNum||"",colorCode:e.data.colorCode||"",colorName:e.data.colorName||"",sizeCode:e.data.sizeCode||"",sizeName:e.data.sizeName||"",packageNum:e.data.packageNum||"",inputNumber:e.data.inputNumber||"",arrowFlag:!0}),t.alreadyOutStorageArr=i(t.alreadyOutStorageArr),t.isSelectCheckbox?r(!1):r(!0);else{t.showErrorMessage=e.msg,t.showErrorPop=!0;let o=setTimeout((()=>{clearTimeout(o),t.showErrorPop=!1}),2e3)}}))},r=e=>{for(let o=0;o<t.outStorageArr.length;o++)for(let a=0;a<t.alreadyOutStorageArr.length;a++)t.outStorageArr[o].id==t.alreadyOutStorageArr[a].id&&(t.outStorageArr[o].isShowScan=e,t.outStorageArr[o].isSelectScan=e)};return __spreadProps(__spreadValues({},e.toRefs(t)),{handleScanCodeBox:()=>{uni.scanCode({onlyFromCamera:!0,success:e=>{l("log","at pages/cutWarehouse/cutOutStorage.vue:122",e.result),t.sewingTaskRecord?(l("log","at pages/cutWarehouse/cutOutStorage.vue:125","扫描扫描PCS码"),a(e.result)):(l("log","at pages/cutWarehouse/cutOutStorage.vue:129","扫描扫描缝制任务单号"),o(e.result))},fail:e=>{}})},handleScanTask:o,handleScanPCS:a,checkboxChange:e=>{t.isSelectCheckbox?(t.isSelectCheckbox=!1,r(!0)):(t.isSelectCheckbox=!0,r(!1))},handleMore:()=>{t.showModal=!0},handleOutStorage:()=>{S.outOfStock({list:t.outStorageArr}).then((e=>{if(0===e.code){t.outStorageArr=[],t.showSuccessMessage="出库成功！",t.showSuccessPop=!0;let e=setTimeout((()=>{clearTimeout(e),t.showSuccessPop=!1}),2e3)}}))},handleEmpty:()=>{t.outStorageArr=[],t.showModal=!1,t.sewingTaskRecord=""},outStorageMethods:r})},components:{scanCode:f}}),[["render",function(t,o,a,r,n,s){const c=e.resolveComponent("scanCode");return e.openBlock(),e.createElementBlock("view",{class:"mainContent"},[e.createElementVNode("view",{class:"location"},[e.createElementVNode("image",{class:"scanCodeBox",src:"/static/cutWarehouse/scanCodeBox.png",mode:"aspectFit",onClick:o[0]||(o[0]=(...e)=>t.handleScanCodeBox&&t.handleScanCodeBox(...e))}),e.createElementVNode("input",{class:"uni-input scanInput","placeholder-style":"font-size: 34rpx","confirm-type":"search",placeholder:t.sewingTaskRecord?"请扫描PCS码":"请扫描缝制任务单号"},null,8,["placeholder"])]),e.createElementVNode("view",{class:"storageLocation"},[e.createElementVNode("text",{class:"storageTitle"},"缝制任务单号："),e.withDirectives(e.createElementVNode("input",{class:"uni-input storageInput","placeholder-style":"font-size: 34rpx","onUpdate:modelValue":o[1]||(o[1]=e=>t.sewingTaskRecord=e),"confirm-type":"search",placeholder:"请输入缝制任务单号",disabled:""},null,512),[[e.vModelText,t.sewingTaskRecord]])]),e.createElementVNode("view",{class:"radioLocation"},[e.createElementVNode("checkbox-group",{onChange:o[2]||(o[2]=(...e)=>t.checkboxChange&&t.checkboxChange(...e))},[e.createElementVNode("view",{class:"checkboxStyle"},[e.createElementVNode("checkbox",{value:"",checked:!t.isSelectCheckbox,style:{transform:"scale(0.8)"}},null,8,["checked"])]),e.createElementVNode("view",{class:"checkboxStyle"},"全部")],32)]),e.createElementVNode("view",{class:"pannelContent"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.outStorageArr,((t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"storageItem",key:o},[e.withDirectives(e.createElementVNode("view",{class:e.normalizeClass([t.isSelectScan?"selectLine":"","touch-list","list-touch"]),style:e.normalizeStyle(t.txtStyle)},[e.createElementVNode("text",{class:"serialNumber"},e.toDisplayString(o+1)+".",1),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"storageCode"},e.toDisplayString(t.proNum),1),e.createElementVNode("view",null,[e.createElementVNode("text",null,"颜色尺码："),e.createElementVNode("text",{decode:"true",space:"true"},e.toDisplayString(t.colorCode)+" "+e.toDisplayString(t.colorName)+" "+e.toDisplayString(t.sizeName),1)]),e.createElementVNode("view",{class:"storageContent"},[e.createElementVNode("view",null,[e.createElementVNode("text",null,"扎号："),e.createElementVNode("text",null,e.toDisplayString(t.packageNum),1)]),e.createElementVNode("view",{class:"storageNum"},[e.createElementVNode("text",null,"数量："),e.createElementVNode("text",null,e.toDisplayString(t.inputNumber),1)])])])],6),[[e.vShow,t.isShowScan]])])))),128))]),e.createElementVNode("view",{class:"bottomLocation"},[e.createElementVNode("view",{class:"scanNum"},"总行数/已扫描行数："+e.toDisplayString(t.outStorageArr.length)+"/"+e.toDisplayString(t.alreadyOutStorageArr.length),1),e.createElementVNode("view",{class:"btnLocation"},[e.createElementVNode("view",{class:"commonBtn moreBtn",onClick:o[3]||(o[3]=(...e)=>t.handleMore&&t.handleMore(...e))},"更多"),t.outStorageArr.length>0&&t.outStorageArr.length==t.alreadyOutStorageArr.length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"commonBtn inStorageBtn",onClick:o[4]||(o[4]=(...e)=>t.handleOutStorage&&t.handleOutStorage(...e))},"出库")):(e.openBlock(),e.createElementBlock("view",{key:1,class:"commonBtn noInStorageBtn"},"出库"))])]),e.withDirectives(e.createElementVNode("view",{class:"btnModal"},[e.createElementVNode("image",{class:"modalImage",src:"/static/cutWarehouse/modalImage.png",mode:"aspectFit"}),e.createElementVNode("view",{class:"commonBtn emptyBtn",onClick:o[5]||(o[5]=(...e)=>t.handleEmpty&&t.handleEmpty(...e))},"清空")],512),[[e.vShow,t.showModal]]),t.showSuccessPop?(e.openBlock(),e.createElementBlock("view",{key:0,class:"successPopup remindPopup"},[e.createElementVNode("view",{class:"successImage"}),e.createElementVNode("view",{style:{"margin-left":"20rpx"}},e.toDisplayString(t.showSuccessMessage),1)])):e.createCommentVNode("",!0),t.showErrorPop?(e.openBlock(),e.createElementBlock("view",{key:1,class:"errorPopup remindPopup"},[e.createElementVNode("view",{class:"errorImage"}),e.createElementVNode("view",{style:{"margin-left":"20rpx"}},e.toDisplayString(t.showErrorMessage),1)])):e.createCommentVNode("",!0),e.createVNode(c)])}],["__scopeId","data-v-10f2e09e"]]);"undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((o=>t.resolve(e()).then((()=>o))),(o=>t.resolve(e()).then((()=>{throw o}))))}),uni.restoreGlobal&&uni.restoreGlobal(o,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),__definePage("pages/login/login",N),__definePage("pages/cutWarehouse/cutWarehouse",C),__definePage("pages/cutWarehouse/cutInStorage",I),__definePage("pages/cutWarehouse/repealCutInStorage",x),__definePage("pages/cutWarehouse/cutOutStorage",B);const b={onLaunch:function(){},onShow:function(){},onHide:function(){}};const P=e.createVueApp(b);P._component.mpType="app",P._component.render=()=>{},P.use(uni.__vuePlugin).mount("#app")}(Vue);
